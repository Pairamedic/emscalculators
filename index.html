<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMS Calculator Suite</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #f1f1f1;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #90caf9;
        }
        input, select, button {
            padding: 10px;
            font-size: 1em;
            width: 100%;
            margin: 5px 0;
            border: none;
            border-radius: 4px;
        }
        input, select {
            background-color: #1e1e1e;
            color: #ffffff;
        }
        button {
            background-color: #1976d2;
            color: white;
            cursor: pointer;
        }
        .calculator {
            background-color: #1e1e1e;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
        }
        .result {
            margin-top: 10px;
            font-weight: bold;
            color: #64ffda;
            white-space: pre-line;
        }
        .search-box {
            margin-bottom: 20px;
        }
        #referenceTable {
            display: none;
            background-color: #1e1e1e;
            border: 1px solid #90caf9;
            padding: 15px;
            margin-top: 20px;
            border-radius: 8px;
        }
        a {
            color: #90caf9;
            cursor: pointer;
        }
    </style>
</head>
<body>

<h1>EMS Calculator Suite</h1>

<input class="search-box" type="text" id="search" placeholder="Search calculators..." onkeyup="filterCalculators()">
<a onclick="toggleReference()">ðŸ“˜ View Conversion Reference Table</a>
<a onclick="toggleConversions()">ðŸ§® Conversion Calculators</a>

<div id="referenceTable">
    <h2>Standard Medical Conversions</h2>
    <ul>
        <li><b>mg</b> = 1/1000 of a gram</li>
        <li><b>mcg</b> = 1/1000 of a mg = 1/1,000,000 of a gram</li>
        <li><b>g to mg</b>: Multiply by 1,000 (e.g., 5 g Ã— 1000 = 5000 mg)</li>
        <li><b>mg to mcg</b>: Multiply by 1,000 (e.g., 2 mg Ã— 1000 = 2000 mcg)</li>
        <li><b>mcg to mg</b>: Divide by 1,000 (e.g., 1500 mcg Ã· 1000 = 1.5 mg)</li>
        <li><b>mg to g</b>: Divide by 1,000 (e.g., 2000 mg Ã· 1000 = 2 g)</li>
    </ul>
</div>

<!-- ALL CALCULATORS -->
<div id="calculator-container">
    <div class="calculator" data-name="Medication Administration">
        <h2>Medication Administration</h2>
        <label>Ordered Dose (mg)</label>
        <input type="number" id="medDose">
        <label>Volume (ml)</label>
        <input type="number" id="medVolume">
        <label>Concentration (mg)</label>
        <input type="number" id="medConcentration">
        <button onclick="calculateMedAdmin()">Calculate mL to Draw</button>
        <div class="result" id="medResult"></div>
    </div>

    <div class="calculator" data-name="IV Infusion">
        <h2>IV Infusion Rate</h2>
        <label>Ordered Dose (Âµg/kg/min)</label>
        <input type="number" id="ivDose">
        <label>Volume (ml)</label>
        <input type="number" id="ivVolume">
        <label>Weight (kg)</label>
        <input type="number" id="ivWeight">
        <label>Drip Set (default 60)</label>
        <input type="number" id="ivDrip" value="60">
        <label>Total Concentration (mg)</label>
        <input type="number" id="ivConcentration">
        <button onclick="calculateIVInfusion()">Calculate gtts/min</button>
        <div class="result" id="ivResult"></div>
    </div>

    <div class="calculator" data-name="Drip Timing Assistant">
    <h2>Drip Timing Assistant</h2>
    <label>Target Rate (gtts/min)</label>
    <input type="number" id="dripTarget">
    <button onclick="calculateDripTiming()">Calculate</button>
    <div class="result" id="dripTimingResult"></div>
</div>

    <div class="calculator" data-name="Fluid Over Time">
        <h2>Fluid Over Time</h2>
        <label>Volume (ml)</label>
        <input type="number" id="fluidVolume">
        <label>Drip Set (10/60)</label>
        <input type="number" id="fluidDrip">
        <label>Time (minutes)</label>
        <input type="number" id="fluidTime">
        <button onclick="calculateFluidTime()">Calculate gtts/min</button>
        <div class="result" id="fluidResult"></div>
    </div>

    <div class="calculator" data-name="Parkland Burn">
        <h2>Parkland Burn Formula</h2>
        <label>Weight (kg)</label>
        <input type="number" id="burnWeight">
        <label>Burn % TBSA</label>
        <input type="number" id="burnPercent">
        <button onclick="calculateBurn()">Calculate Fluids (24h & 8h)</button>
        <div class="result" id="burnResult"></div>
    </div>

<div class="calculator" data-name="GCS">
    <h2>Glasgow Coma Scale (GCS)</h2>
    
    <label>Eye Response</label>
    <select id="gcsEye">
        <option value="4">Spontaneous</option>
        <option value="3">To voice</option>
        <option value="2">To pain</option>
        <option value="1">No response</option>
    </select>

    <label>Verbal Response</label>
    <select id="gcsVerbal">
        <option value="5">Oriented</option>
        <option value="4">Confused</option>
        <option value="3">Inappropriate words</option>
        <option value="2">Incomprehensible sounds</option>
        <option value="1">No response</option>
    </select>

    <label>Motor Response</label>
    <select id="gcsMotor">
        <option value="6">Obeys commands</option>
        <option value="5">Localizes pain</option>
        <option value="4">Withdraws from pain</option>
        <option value="3">Flexion to pain (decorticate)</option>
        <option value="2">Extension to pain (decerebrate)</option>
        <option value="1">No response</option>
    </select>

    <button onclick="calculateGCS()">Calculate GCS</button>
    <div class="result" id="gcsResult"></div>
</div>


<div class="calculator" data-name="APGAR">
    <h2>APGAR Score</h2>

    <label>Appearance (Skin Color)</label>
    <select id="apgar1">
        <option value="2">Normal color all over</option>
        <option value="1">Blue extremities, pink body (acrocyanosis)</option>
        <option value="0">Blue/pale all over</option>
    </select>

    <label>Pulse (Heart Rate)</label>
    <select id="apgar2">
        <option value="2">â‰¥ 100 bpm</option>
        <option value="1">&lt; 100 bpm</option>
        <option value="0">Absent</option>
    </select>

    <label>Grimace (Reflex Irritability)</label>
    <select id="apgar3">
        <option value="2">Pulls away, sneezes, coughs</option>
        <option value="1">Facial movement only (grimace)</option>
        <option value="0">No response</option>
    </select>

    <label>Activity (Muscle Tone)</label>
    <select id="apgar4">
        <option value="2">Active motion</option>
        <option value="1">Some flexion of extremities</option>
        <option value="0">Limp</option>
    </select>

    <label>Respiration</label>
    <select id="apgar5">
        <option value="2">Strong cry</option>
        <option value="1">Weak/irregular breathing</option>
        <option value="0">Absent</option>
    </select>

    <button onclick="calculateAPGAR()">Calculate APGAR</button>
    <div class="result" id="apgarResult"></div>
</div>

<!-- SCRIPT -->
<script>
function filterCalculators() {
    let input = document.getElementById('search').value.toLowerCase();
    let calculators = document.querySelectorAll('.calculator');
    calculators.forEach(cal => {
        let name = cal.getAttribute('data-name').toLowerCase();
        cal.style.display = name.includes(input) ? 'block' : 'none';
    });
}

function toggleReference() {
    const ref = document.getElementById("referenceTable");
    const conv = document.getElementById("conversionCalculators");
    if (ref.style.display === "none") {
        ref.style.display = "block";
        if (conv) conv.style.display = "none";
    } else {
        ref.style.display = "none";
    }
}

function toggleConversions() {
    const conv = document.getElementById("conversionCalculators");
    const ref = document.getElementById("referenceTable");
    if (conv.style.display === "none" || conv.style.display === "") {
        conv.style.display = "block";
        ref.style.display = "none";
        conv.scrollIntoView({ behavior: "smooth", block: "start" });
    } else {
        conv.style.display = "none";
    }
}

// ==== CALCULATOR FUNCTIONS ====
// (Your full list of JS functions goes here â€” unchanged. 
// e.g., calculateMedAdmin, calculateBurn, calculateRSI, etc.)
<script>
    function filterCalculators() {
        let input = document.getElementById('search').value.toLowerCase();
        let calculators = document.querySelectorAll('.calculator');
        calculators.forEach(cal => {
            let name = cal.getAttribute('data-name').toLowerCase();
            cal.style.display = name.includes(input) ? 'block' : 'none';
        });
    }

    function calculateDripTiming() {
    let target = parseFloat(document.getElementById('dripTarget').value);
    if (!isNaN(target)) {
        let per10 = target / 6;
        let per15 = target / 4;
        let per30 = target / 2;

        document.getElementById('dripTimingResult').innerText = 
            `Target Drips:\n` +
            `â€¢ Every 10 sec: ${per10.toFixed(1)} gtts\n` +
            `â€¢ Every 15 sec: ${per15.toFixed(1)} gtts\n` +
            `â€¢ Every 30 sec: ${per30.toFixed(1)} gtts`;
    }
}

    function toggleReference() {
    const ref = document.getElementById("referenceTable");
    const conv = document.getElementById("conversionCalculators");

    if (ref.style.display === "none") {
        ref.style.display = "block";
        conv.style.display = "none";
    } else {
        ref.style.display = "none";
    }
}

function toggleConversions() {
    const conv = document.getElementById("conversionCalculators");
    const ref = document.getElementById("referenceTable");

    if (conv.style.display === "none" || conv.style.display === "") {
        conv.style.display = "block";
        ref.style.display = "none";
        conv.scrollIntoView({ behavior: "smooth", block: "start" });
    } else {
        conv.style.display = "none";
    }
}

function calculateMedAdmin() {
    let dose = parseFloat(document.getElementById('medDose').value);
    let volume = parseFloat(document.getElementById('medVolume').value);
    let concentration = parseFloat(document.getElementById('medConcentration').value);
    if (!isNaN(dose) && !isNaN(volume) && !isNaN(concentration) && concentration > 0) {
        let result = (dose * volume) / concentration;
        document.getElementById('medResult').innerText = "Draw up: " + result.toFixed(2) + " mL";
    }
}

    function calculateIVInfusion() {
        let dose = parseFloat(document.getElementById('ivDose').value);
        let volume = parseFloat(document.getElementById('ivVolume').value);
        let weight = parseFloat(document.getElementById('ivWeight').value);
        let drip = parseFloat(document.getElementById('ivDrip').value);
        let concentration = parseFloat(document.getElementById('ivConcentration').value);
        if (!isNaN(dose) && !isNaN(volume) && !isNaN(weight) && !isNaN(drip) && !isNaN(concentration) && concentration > 0) {
            let result = ((dose / 1000) * volume * weight * drip) / concentration;
            document.getElementById('ivResult').innerText = "IV Rate: " + result.toFixed(2) + " gtts/min";
        }
    }

    function calculateFluidTime() {
        let volume = parseFloat(document.getElementById('fluidVolume').value);
        let drip = parseFloat(document.getElementById('fluidDrip').value);
        let time = parseFloat(document.getElementById('fluidTime').value);
        if (!isNaN(volume) && !isNaN(drip) && !isNaN(time) && time > 0) {
            let result = (volume * drip) / time;
            document.getElementById('fluidResult').innerText = "Rate: " + result.toFixed(2) + " gtts/min";
        }
    }

    function calculateBurn() {
        let weight = parseFloat(document.getElementById('burnWeight').value);
        let percent = parseFloat(document.getElementById('burnPercent').value);
        if (!isNaN(weight) && !isNaN(percent)) {
            let totalFluids = 4 * weight * percent;
            let first8h = totalFluids / 2;
            document.getElementById('burnResult').innerText = 
                "24h Total: " + totalFluids + " mL | First 8h: " + first8h + " mL";
        }
    }

    function calculateGCS() {
        let eye = parseInt(document.getElementById('gcsEye').value);
        let verbal = parseInt(document.getElementById('gcsVerbal').value);
        let motor = parseInt(document.getElementById('gcsMotor').value);
        if (!isNaN(eye) && !isNaN(verbal) && !isNaN(motor)) {
            let total = eye + verbal + motor;
            document.getElementById('gcsResult').innerText = "GCS Score: " + total;
        }
    }

    function calculateAPGAR() {
        let a1 = parseInt(document.getElementById('apgar1').value);
        let a2 = parseInt(document.getElementById('apgar2').value);
        let a3 = parseInt(document.getElementById('apgar3').value);
        let a4 = parseInt(document.getElementById('apgar4').value);
        let a5 = parseInt(document.getElementById('apgar5').value);
        if (!isNaN(a1) && !isNaN(a2) && !isNaN(a3) && !isNaN(a4) && !isNaN(a5)) {
            let total = a1 + a2 + a3 + a4 + a5;
            document.getElementById('apgarResult').innerText = "APGAR Score: " + total;
        }
    }

    function calculateOxygen() {
        let factor = parseFloat(document.getElementById('o2Factor').value);
        let pressure = parseFloat(document.getElementById('o2Pressure').value);
        let flow = parseFloat(document.getElementById('o2Flow').value);
        if (!isNaN(factor) && !isNaN(pressure) && !isNaN(flow) && flow > 0) {
            let duration = (pressure - 200) * factor / flow;
            document.getElementById('o2Result').innerText = "Duration: " + duration.toFixed(1) + " minutes";
        }
    }

    function calculateMAP() {
        let sys = parseFloat(document.getElementById('mapSystolic').value);
        let dia = parseFloat(document.getElementById('mapDiastolic').value);
        if (!isNaN(sys) && !isNaN(dia)) {
            let map = (sys + 2 * dia) / 3;
            document.getElementById('mapResult').innerText = "MAP: " + map.toFixed(1) + " mmHg";
        }
    }

    function calculateVent() {
        let height = parseFloat(document.getElementById('ventHeight').value);
        let sex = document.getElementById('ventSex').value;
        if (!isNaN(height)) {
            let ibw = sex === "male" ? 50 + 2.3 * (height - 60) : 45.5 + 2.3 * (height - 60);
            let tvLow = ibw * 6;
            let tvHigh = ibw * 8;
            document.getElementById('ventResult').innerText = 
                "IBW: " + ibw.toFixed(1) + " kg | Tidal Volume: " + tvLow.toFixed(0) + "â€“" + tvHigh.toFixed(0) + " mL";
        }
    }

    function calculateTube() {
        let age = parseFloat(document.getElementById('pedsAge').value);
        if (!isNaN(age)) {
            let size = (age / 4) + 3.5;
            document.getElementById('tubeResult').innerText = "Cuffed Tube Size: " + size.toFixed(1);
        }
    }

    function calculateSBP() {
        let age = parseFloat(document.getElementById('pedsSBPAge').value);
        if (!isNaN(age)) {
            let sbp = 70 + (age * 2);
            document.getElementById('sbpResult').innerText = "Minimum SBP: " + sbp + " mmHg";
        }
    }

// ==== SAFE DOM INSERTS ====
window.onload = function () {
    document.getElementById('medResult')?.insertAdjacentHTML('beforeend', '<br><i>Formula: (Dose Ã— Volume) Ã· Concentration</i>');
    document.getElementById('ivResult')?.insertAdjacentHTML('beforeend', '<br><i>Formula: (Dose Ã— Volume Ã— Weight Ã— Drip) Ã· Concentration</i>');
    document.getElementById('fluidResult')?.insertAdjacentHTML('beforeend', '<br><i>Formula: (Volume Ã— Drip Set) Ã· Time</i>');
    document.getElementById('burnResult')?.insertAdjacentHTML('beforeend', '<br><i>Formula: 4 Ã— Weight Ã— %Burn = Total Volume (half in first 8h)</i>');
    document.getElementById('gcsResult')?.insertAdjacentHTML('beforeend', '<br><i>Formula: Eye + Verbal + Motor</i>');
    document.getElementById('apgarResult')?.insertAdjacentHTML('beforeend', '<br><i>Formula: Sum of all 5 category scores</i>');
    document.getElementById('o2Result')?.insertAdjacentHTML('beforeend', '<br><i>Formula: (Tank PSI - 200) Ã— Factor Ã· Flow Rate</i>');
    document.getElementById('mapResult')?.insertAdjacentHTML('beforeend', '<br><i>Formula: (SBP + 2 Ã— DBP) Ã· 3</i>');
    document.getElementById('ventResult')?.insertAdjacentHTML('beforeend', '<br><i>Formula: IBW = 50+2.3(height-60) male or 45.5+2.3(height-60) female; TV = IBW Ã— 6â€“8</i>');
    document.getElementById('tubeResult')?.insertAdjacentHTML('beforeend', '<br><i>Formula: (Age Ã· 4) + 3.5</i>');
    document.getElementById('sbpResult')?.insertAdjacentHTML('beforeend', '<br><i>Formula: 70 + (Age Ã— 2)</i>');
    document.getElementById('rsiResult')?.insertAdjacentHTML('beforeend', '<br><i>Formulas: Drug Ã— weight (kg)</i>');
    document.getElementById('rtsResult')?.insertAdjacentHTML('beforeend', '<br><i>Formulas: Coded score from GCS, SBP, RR</i>');
    document.getElementById('strokeResult')?.insertAdjacentHTML('beforeend', '<br><i>Any abnormal = positive; 3 signs tested</i>');
};
</script>

</body>
</html>
